<div class="fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center p-4 z-50">
  <div class="bg-white rounded-lg shadow-xl max-w-md w-full max-h-[90vh] overflow-y-auto">
    <!-- Modal Header -->
    <div class="px-6 py-4 border-b border-gray-200">
      <h3 class="text-lg font-medium text-gray-900">
        {{ selectedStock.id ? 'Modifier le stock' : 'Ajouter un stock' }}
      </h3>
    </div>

    <!-- Modal Body -->
    <div class="px-6 py-4">
      <form (ngSubmit)="onSave()">
<!-- Produit Selection -->
<select id="produit" [(ngModel)]="selectedProduitId" (change)="onProduitChange()" name="produit" required>
  <option value="" disabled>Sélectionnez un produit</option>
  <option *ngFor="let produit of produits" [value]="produit.id">{{ produit.nom }}</option>
</select>

<!-- Entrepôt Selection -->
<select id="entrepot" [(ngModel)]="selectedEntrepotId" (change)="onEntrepotChange()" name="entrepot" required>
  <option value="" disabled>Sélectionnez un entrepôt</option>
  <option *ngFor="let entrepot of entrepots" [value]="entrepot.id">{{ entrepot.nom }}</option>
</select>


        <!-- Quantité -->
        <div class="mb-4">
          <label for="quantite" class="block text-sm font-medium text-gray-700 mb-1">Quantité</label>
          <input type="number" id="quantite" [(ngModel)]="selectedStock.quantite" name="quantite" min="0" required
                 class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500">
        </div>

        <!-- Seuil d'Alerte -->
        <div class="mb-4">
          <label for="seuilAlerte" class="block text-sm font-medium text-gray-700 mb-1">Seuil d'Alerte</label>
          <input type="number" id="seuilAlerte" [(ngModel)]="selectedStock.seuilAlerte" name="seuilAlerte" min="0" required
                 class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500">
        </div>

        <!-- Nom du Stock (optionnel) -->
        <div class="mb-4" *ngIf="selectedStock.nom">
          <label for="nomStock" class="block text-sm font-medium text-gray-700 mb-1">Nom du Stock</label>
          <input type="text" id="nomStock" [(ngModel)]="selectedStock.nom" name="nomStock"
                 class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500">
        </div>

        <!-- Modal Footer -->
        <div class="px-6 py-4 border-t border-gray-200 flex justify-end space-x-3">
          <button type="button" (click)="onClose()"
                  class="px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500">
            Annuler
          </button>
          <button type="submit"
                  class="px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500">
            {{ selectedStock.id ? 'Mettre à jour' : 'Ajouter' }}
          </button>
        </div>
      </form>
    </div>
  </div>
</div>